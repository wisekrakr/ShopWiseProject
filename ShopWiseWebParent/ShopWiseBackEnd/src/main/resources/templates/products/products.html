<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
  <head th:replace="fragments :: html_head('Products | ShopWise Admin','none')"> </head>
  <body>
    <div th:replace="header :: header">Header</div>

    <div class="container-fluid">

      <div>
        <h2 class="heading">Manage Products</h2>
        <hr />

        <!-- Product list features/controls  -->

        <div class="controls">
          <a
            class="btn btn-wise mb-3 mr-3"
            data-toggle="tooltip"
            data-placement="top"
            title="Create new product"
            th:href="@{/products/new}"
            ><i class="fas fa-plus-circle fa-2x icon-light"></i
          ></a>
          <a
            class="btn btn-wise mb-3 mr-3"
            data-toggle="tooltip"
            data-placement="top"
            title="Export to PDF File"
            th:href="@{/products/export/pdf}"
            ><i class="fa fa-file-pdf fa-2x icon-light"></i
          ></a>
          <a
            class="btn btn-wise mb-3 mr-3"
            data-toggle="tooltip"
            data-placement="top"
            title="Export to Excel File"
            th:href="@{/products/export/excel}"
            ><i class="fa fa-file-excel fa-2x icon-light"></i
          ></a>
          <a
            class="btn btn-wise mb-3 mr-3"
            data-toggle="tooltip"
            data-placement="top"
            title="Export to CSV File"
            th:href="@{/products/export/csv}"
            ><i class="fa fa-file-csv fa-2x icon-light"></i
          ></a>
        </div>

        <!-- Search bar -->
        <div th:replace="fragments_search :: search_bar('/products')">
          Search Bar
        </div>
        <!-- Messages  -->
        <div th:replace="fragments :: messages">Messages</div>
      </div>

      <!-- Full user details table -->
      <div class="full-details">
        <table
          class="
            table table-bordered table-striped table-hover table-responsive-xl
          "
        >
          <thead class="thead-dark">
            <tr>
              <th class="hideable-column">ID</th>
              <th>Main Image</th>
              <th
                th:replace="fragments :: column_sort_link('/products', 'name', 'Product Name','none')"
              ></th>
              <th class="hideable-column"> 
                <th class="hideable-column"
                th:replace="fragments :: column_sort_link('/products','brand', 'Brand','tag')"
              ></th>
              </th>

              <th
                th:replace="fragments :: column_sort_link('/products','category', 'Category', 'none')"
              ></th>
              <th
                th:replace="fragments :: column_sort_link('/products','enabled', 'Enabled','none')"
              ></th>
              <th></th>
            </tr>
          </thead>
          <tbody>
            <tr th:each="product : ${products}">
              <td class="hideable-column">
                [[${product.id}]] <br />
                Created at: <br />[[${product.getCreateDate}]]
              </td>
              <td>
                <img
                  class="thumbnail-square"
                  th:src="@{${product.mainImagePath}}"
                  alt=""
                />
              </td>
              <td>[[${product.name}]]</td>
              <td>[[${product.brand.name}]]</td>
              <td>[[${product.category.name}]]</td>
              <td>
                <div                  
                  th:replace="fragments :: action_status('/products',${product})"
                >
                  Product toggle enabled
                </div>
              </td>
              <td class="action-controls" >
                <a
                  class="fas fa-file-alt fa-2x icon-blue mr-3"
                  data-toggle="tooltip"
                  data-placement="top"
                  title="View Product Details"
                  style="border: none;"
                  th:href="@{'/products/details/' + ${product.id}}"
                ></a>
                <div
                  th:replace="fragments :: action_edit_delete('/products',${product},${product.name},${product != null})"
                >
                  Product edit and delete controls
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- Lesser user list table (small screens) -->
      <div class="less-details">
        <div class="row m-1" th:each="product: ${products}">
          <div class="col-4">
            <img
              class="thumbnail-square"
              th:src="@{${product.mainImagePath}}"
              alt=""
            />
          </div>
          <div class="col-8 text-center mt-4">
            <div>[[${product.name}]]</div>
            <td>[[${product.brand.name}]]</td>
            <td>[[${product.category.name}]]</td>
            <div
              class="action-controls"
              th:replace="fragments :: action_status('/products',${product})"
            >
              Product toggle enabled
            </div>
            <div
              th:replace="fragments :: action_edit_delete('/products',${product},${product.name},${product != null})"
            >
              Product edit and delete controls
            </div>
          </div>
        </div>
      </div>

      <div
        th:replace="fragments_pagination :: pagination('/products','Products')"
      >
        Pagination
      </div>

      <div th:replace="fragments_modal :: modal_confirm">
        Confirm Modal Dialog
      </div>

      <div th:replace="footer :: footer">Footer</div>
    </div>

    <script type="text/javascript" th:src="@{/js/list_functions.js}"></script>
  </body>
</html>
